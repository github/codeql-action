name: "Custom source root"
description: "Checks that the argument specifying a non-default source root works"
versions: ["linked", "default", "nightly-latest"] # This feature is not compatible with old CLIs
steps:
  - name: Move codeql-action
    run: |
      mkdir ../new-source-root
      mv * ../new-source-root
  - uses: ./../action/init
    with:
      languages: javascript
      source-root: ../new-source-root
      tools: ${{ steps.prepare-test.outputs.tools-url }}
  - uses: ./../action/analyze
    with:
      skip-queries: true
  - name: Assert database exists
    run: |
      cd "$RUNNER_TEMP/codeql_databases"
      if [[ ! -d javascript ]]; then
        echo "Did not find a JavaScript database"
        exit 1
      fi
